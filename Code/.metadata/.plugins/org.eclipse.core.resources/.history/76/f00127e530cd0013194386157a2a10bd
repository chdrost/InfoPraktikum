/*
 * FileOpener.cpp
 *
 *  Created on: 25.04.2014
 *      Author: christoph
 */

#include "FileOpener.h"

FileOpener::FileOpener() {
}

FileOpener::~FileOpener() {
	if (datei != NULL) {
		datei.close();
	}
}

void FileOpener::oeffneDatei(const char* adresse) {
	datei.open(adresse, ifstream::in);
	if (!datei) {
		throw FileNotFoundException("Die Datei konnte nicht gefunden werden.");
	}
}

void FileOpener::leseDateiAus() {
	string zeile;
	while (getline(datei, zeile)) {
		datenSatz.push_back(zeile);
	}
}

void FileOpener::spalteZeilen(void) {
	for (vector<string>::iterator it = datenSatz.begin(); it != datenSatz.end();
			it++) {
		vector<string> zwischen;
		const char *constUngeteilteZeile = ((string)*it).c_str();
		char *ungeteilteZeile;
		//Entfernt das "const"
		memcpy(ungeteilteZeile,constUngeteilteZeile, sizeof(*constUngeteilteZeile));
				char* geteilteZeile = strtok(ungeteilteZeile, ";");
				while (geteilteZeile != NULL) {
					zwischen.append((string)geteilteZeile);
					char* zeile = strtok((char*) *it, ";");
				}
				geteilterDatensatz.append(zwischen);
			}
		}
